# Production profile - Works with any cloud platform
# Uses environment variables for configuration
# Platforms: Railway, Render, Heroku, Google Cloud Run, AWS, etc.

spring.profiles.active=prod

# Database connection - Uses environment variables
# Railway provides: MYSQL_URL (full connection URL via ${{ MySQL.MYSQL_URL }})
# Set SPRING_DATASOURCE_URL=${{ MySQL.MYSQL_URL }} in Railway environment variables
spring.datasource.url=${SPRING_DATASOURCE_URL:${MYSQL_URL:${DATABASE_URL:jdbc:mysql://${MYSQL_HOST:localhost}:${MYSQL_PORT:3306}/${MYSQL_DATABASE:workoutdb}?useSSL=false&allowPublicKeyRetrieval=true}}}

# Database credentials
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:${DB_USER:${MYSQL_USER:root}}}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:${DB_PASSWORD:${MYSQL_PASSWORD:}}}

# JPA settings
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Explicitly set MySQL dialect to prevent "Unable to determine Dialect" error
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect

# PostgreSQL support (for Render and other platforms using PostgreSQL)
# Uncomment if using PostgreSQL:
# spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
# spring.datasource.url=${DATABASE_URL}

# Server settings - Most platforms set PORT automatically
server.port=${PORT:8080}

# Application name
spring.application.name=WorkoutTracker


